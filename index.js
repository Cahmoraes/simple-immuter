const si=(()=>{const a=new Map([[1,"This object has been frozen and should not be mutated"],[2,"baseState and producer are incompatibles"],[3,`Cannot merge these types`]]),b=b=>()=>console.log(a.get(b)),c=(...a)=>b=>a.reduce((a,b)=>b(a),b),d=(a,b=1/0)=>"array"===k(a)?0<b?a.reduce((a,c)=>a.concat(d(c,--b)),[]):a:a,e=a=>Object.fromEntries(a),f=a=>Reflect.ownKeys(a),g=a=>(a.add=b(1),a.delete=b(1),a.clear=b(1),a),h=a=>(a.set=b(1),a.delete=b(1),a.clear=b(1),a),i=a=>b=>Object.setPrototypeOf(b,a),j=a=>Object.getPrototypeOf(a),k=a=>{const b=Reflect.apply(Object.prototype.toString,a,[]);return b.substring(b.indexOf(" ")+1,b.indexOf("]")).toLowerCase()},l=a=>"array"===k(a),m=a=>"object"===k(a),n=a=>"function"===k(a),o=a=>"promise"===k(a),p=a=>"undefined"===k(a),q=(...a)=>{for(let b=0,c=b+1;c<a.length;c=b+1,b++)if(k(a[b])!==k(a[c]))return!0;return!1},r=a=>a.every(l),s=a=>a.every(m),t=a=>(...b)=>b.every(b=>k(b)===a),u=t("object"),v=t("array"),w=a=>Object.freeze(a),x=(b,c,e)=>{if(u(b,c)&&s(e))try{return y(Object.assign(b,c,...e))}catch{throw new Error(a.get(2))}if(v(b,c)&&r(e))try{return y([...b,...c,...d(e,1)])}catch{throw new Error(a.get(2))}},y=a=>{switch(k(a)){case"object":return c(e,i(j(a)),w)(f(a).map(b=>[b,y(a[b])]));case"array":return w(a.map(y));case"set":return g(a);case"map":const b=new Map;return a.forEach((a,c)=>{b.set(c,y(a))}),h(b);default:return a;}},z=async(a,b)=>{try{const c=await a;if(p(b))return y(c);if(n(b))return b(c),y(c)}catch(a){return a.message}},A=a=>a.map(E),B=a=>{const b=Object.getPrototypeOf(a);return c(e,i(b))(f(a).map(b=>[b,E(a[b])]))},C=a=>{const b=new Map;return a.forEach((a,c)=>{b.set(c,E(a))}),b},D=a=>{const b=new Set;return a.forEach(a=>b.add(E(a))),b},E=a=>{switch(k(a)){case"object":return B(a);case"array":return A(a);case"map":return C(a);case"set":return D(a);default:return a;}};return{produce:(b,c,...d)=>{if(o(b))return z(b,c);const e=E(b);if(p(c))return y(e);if(n(c))return c(e),y(e);if(0<d.length)return x(e,c,d);if(u(e,c))return y(Object.assign(e,c));if(v(e,c))return y([...e,...c]);if(q(e,c))throw new Error(a.get(2));else throw new Error(a.get(3))}}})();module.exports=si;